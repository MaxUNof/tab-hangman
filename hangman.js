let favicon = document.getElementById('favicon');
// source: https://1000mostcommonwords.com/1000-most-common-russian-words/
var words = [
  'как',
  'его',
  'что',
  'было',
  'для',
  'являются',
  'они',
  'быть',
  'один',
  'иметь',
  'это',
  'горячий',
  'слово',
  'что',
  'некоторые',
  'является',
  'это',
  'или',
  'было',
  'площадь',
  'гора',
  'основной',
  'взял',
  'может',
  'другой',
  'были',
  'который',
  'сделать',
  'время',
  'если',
  'будет',
  'как',
  'указанный',
  'назад',
  'каждый',
  'сказать',
  'делает',
  'набор',
  'три',
  'хочу',
  'воздух',
  'хорошо',
  'также',
  'играть',
  'небольшой',
  'конец',
  'положить',
  'домой',
  'читать',
  'рука',
  'порт',
  'большой',
  'заклинание',
  'добавлять',
  'даже',
  'земля',
  'здесь',
  'должны',
  'большой',
  'высокий',
  'такие',
  'следовать',
  'акт',
  'почему',
  'спросите',
  'люди',
  'изменение',
  'пошел',
  'свет',
  'вид',
  'нуждаться',
  'дом',
  'картинка',
  'пытаться',
  'нам',
  'снова',
  'животных',
  'точка',
  'мать',
  'мир',
  'около',
  'строить',
  'самостоятельно',
  'земля',
  'отец',
  'любой',
  'новый',
  'работа',
  'часть',
  'принимать',
  'получать',
  'место',
  'сделал',
  'жить',
  'где',
  'после',
  'назад',
  'немного',
  'только',
  'круглый',
  'человек',
  'год',
  'пришел',
  'шоу',
  'каждый',
  'хорошее',
  'меня',
  'давать',
  'наш',
  'под',
  'название',
  'очень',
  'через',
  'просто',
  'форма',
  'приговор',
  'большой',
  'думать',
  'сказать',
  'помощь',
  'низкий',
  'линия',
  'отличаются',
  'поворот',
  'причиной',
  'много',
  'означать',
  'движение',
  'право',
  'мальчик',
  'старый',
  'слишком',
  'она',
  'все',
  'там',
  'когда',
  'вверх',
  'использование',
  'ваш',
  'способ',
  'многие',
  'затем',
  'запись',
  'подобно',
  'так',
  'эти',
  'долго',
  'сделать',
  'вещь',
  'посмотреть',
  'его',
  'два',
  'имеет',
  'искать',
  'еще',
  'день',
  'мог',
  'идти',
  'приходят',
  'сделал',
  'число',
  'звук',
  'нет',
  'наиболее',
  'люди',
  'мой',
  'над',
  'знать',
  'вода',
  'чем',
  'вызов',
  'первый',
  'кто',
  'может',
  'вниз',
  'сторона',
  'был',
  'сейчас',
  'находить',
  'руководитель',
  'стоять',
  'самостоятельно',
  'страница',
  'должны',
  'страна',
  'найдено',
  'ответ',
  'школа',
  'расти',
  'исследование',
  'еще',
  'учиться',
  'завод',
  'крышка',
  'еда',
  'солнце',
  'четыре',
  'между',
  'состояние',
  'держать',
  'глаз',
  'никогда не',
  'последнее',
  'позволять',
  'мысль',
  'город',
  'дерево',
  'пересекают',
  'ферма',
  'трудно',
  'начало',
  'мощи',
  'история',
  'пила',
  'далеко',
  'море',
  'привлечь',
  'слева',
  'поздно',
  'запустить',
  'в то время как',
  'нажмите',
  'близко',
  'ночь',
  'реальный',
  'жизнь',
  'несколько',
  'к северу',
  'книга',
  'нести',
  'взял',
  'наука',
  'есть',
  'номер',
  'друг',
  'начал',
  'идея',
  'рыба',
  'гора',
  'остановить',
  'раз',
  'база',
  'слышать',
  'лошадь',
  'вырезать',
  'уверен',
  'смотреть',
  'цвет',
  'лицо',
  'дерево',
  'основной',
  'открыт',
  'кажется',
  'вместе',
  'следующий',
  'белый',
  'дети',
  'начать',
  'получил',
  'ходить',
  'пример',
  'легкость',
  'бумага',
  'группа',
  'всегда',
  'музыка',
  'тех,',
  'как',
  'знак',
  'часто',
  'письмо',
  'река',
  'автомобиль',
  'футов',
  'уход',
  'второй',
  'достаточно',
  'равнина',
  'девушка',
  'обычно',
  'молодой',
  'готовый',
  'выше',
  'когда-либо',
  'красный',
  'список',
  'хотя',
  'чувствовать',
  'разговор',
  'птица',
  'скоро',
  'тело',
  'собака',
  'семья',
  'прямой',
  'представляют',
  'оставить',
  'песня',
  'измерять',
  'дверь',
  'продукт',
  'черный',
  'короткая',
  'цифра',
  'класс',
  'ветер',
  'вопрос',
  'произойдет',
  'полная',
  'корабль',
  'площадь',
  'половина',
  'рок',
  'порядок',
  'огонь',
  'проблема',
  'кусок',
  'сказал',
  'знал',
  'проходить',
  'топ',
  'весь',
  'король',
  'улица',
  'дюйм',
  'умножить',
  'ничего',
  'курс',
  'оставаться',
  'колеса',
  'полный',
  'сила',
  'синий',
  'объект',
  'решать',
  'поверхность',
  'глубоко',
  'луна',
  'остров',
  'фут',
  'система',
  'занято',
  'тест',
  'запись',
  'лодка',
  'общая',
  'золото',
  'возможно',
  'самолет',
  'вместо него',
  'сухой',
  'интересно',
  'смех',
  'тыс',
  'назад',
  'побежал',
  'проверять',
  'игра',
  'форма',
  'приравнять',
  'горячий',
  'мисс',
  'принес',
  'тепло',
  'снег',
  'шина',
  'приносить',
  'удаленная',
  'заполнить',
  'восток',
  'краска',
  'язык',
  'среди',
  'блок',
  'мощность',
  'город',
  'отлично',
  'уверен',
  'летать',
  'падать',
  'привести',
  'крик',
  'темно',
  'машина',
  'примечание',
  'ждать',
  'план',
  'фигура',
  'звезда',
  'коробка',
  'существительное',
  'поле',
  'остальные',
  'верный',
  'состоянии',
  'фунт',
  'сделано',
  'красота',
  'привод',
  'стоял',
  'содержать',
  'передние',
  'учить',
  'неделя',
  'окончательный',
  'дал',
  'зеленый',
  'быстро',
  'развивать',
  'океан',
  'теплый',
  'бесплатно',
  'минут',
  'сильный',
  'специальный',
  'ясно',
  'хвост',
  'производить',
  'факт',
  'пространство',
  'слышал',
  'лучше',
  'час',
  'лучше',
  'правда',
  'сто',
  'пять',
  'запомнить',
  'шаг',
  'рано',
  'удерживайте',
  'запад',
  'земля',
  'интерес',
  'достичь',
  'быстро',
  'глагол',
  'петь',
  'слушать',
  'шесть',
  'стол',
  'поездки',
  'меньше',
  'утро',
  'десять',
  'простой',
  'несколько',
  'гласный',
  'война',
  'заложить',
  'против',
  'шаблон',
  'медленно',
  'центр',
  'любовь',
  'человек',
  'деньги',
  'служить',
  'появляются',
  'дорога',
  'карта',
  'дождь',
  'правило',
  'управлять',
  'тянуть',
  'холодный',
  'уведомление',
  'голос',
  'энергия',
  'охота',
  'вероятный',
  'кровать',
  'брат',
  'яйцо',
  'поездка',
  'клеток',
  'верить',
  'возможно,',
  'выбрать',
  'внезапный',
  'считать',
  'квадратный',
  'причина',
  'длина',
  'представлять',
  'искусство',
  'заголовок',
  'область',
  'размер',
  'меняться',
  'урегулировать',
  'говорить',
  'вес',
  'общий',
  'лед',
  'дело',
  'круг',
  'пара',
  'включают',
  'разделяй',
  'слог',
  'чувствовал',
  'великий',
  'мяч',
  'еще',
  'волна',
  'падение',
  'сердце',
  'утра',
  'присутствует',
  'тяжелый',
  'танец',
  'двигатель',
  'положение',
  'рука',
  'широкий',
  'парус',
  'материал',
  'доля',
  'лес',
  'сидеть',
  'гонка',
  'окно',
  'магазин',
  'лето',
  'поезд',
  'сон',
  'доказывать',
  'одинокий',
  'нога',
  'упражнение',
  'стена',
  'улов',
  'крепление',
  'хотите',
  'небо',
  'доска',
  'радость',
  'зима',
  'написанный',
  'дикий',
  'инструмент',
  'хранится',
  'стекло',
  'трава',
  'корова',
  'работа',
  'край',
  'знак',
  'визит',
  'мимо',
  'мягкая',
  'весело',
  'яркий',
  'газа',
  'погода',
  'месяц',
  'миллион',
  'нести',
  'отделка',
  'счастливы',
  'надеюсь',
  'цветок',
  'одевать',
  'странный',
  'ушел',
  'торговля',
  'мелодия',
  'поездка',
  'офис',
  'получать',
  'строка',
  'рот',
  'точный',
  'символ',
  'умереть',
  'мере',
  'беда',
  'крик',
  'кроме',
  'писал',
  'семян',
  'тон',
  'присоединиться',
  'предложить',
  'чистый',
  'перерыв',
  'леди',
  'двор',
  'подниматься',
  'плохо',
  'удар',
  'масло',
  'кровь',
  'коснуться',
  'выросла',
  'цент',
  'смешивать',
  'команда',
  'провод',
  'стоимость',
  'потерянный',
  'коричневый',
  'носить',
  'сад',
  'равный',
  'отправлено',
  'выбирать',
  'упал',
  'соответствовать',
  'течь',
  'ярмарка',
  'банк',
  'собирать',
  'сохранить',
  'контроль',
  'десятичной',
  'ухо',
  'еще',
  'вполне',
  'сломал',
  'дело',
  'средний',
  'убивать',
  'сын',
  'озеро',
  'момент',
  'шкала',
  'громко',
  'весна',
  'наблюдать',
  'ребенок',
  'прямо',
  'согласный',
  'нация',
  'словарь',
  'молоко',
  'скорость',
  'метод',
  'орган',
  'платить',
  'возраст',
  'раздел',
  'платье',
  'облако',
  'сюрприз',
  'тихо',
  'камень',
  'крошечный',
  'подъем',
  'круто',
  'дизайн',
  'бедный',
  'много',
  'эксперимент',
  'снизу',
  'ключ',
  'железо',
  'один',
  'палка',
  'плоским',
  'двадцать',
  'кожа',
  'улыбка',
  'складка',
  'отверстие',
  'прыжок',
  'ребенок',
  'восемь',
  'деревня',
  'знакомства',
  'корень',
  'купить',
  'поднимать',
  'решить',
  'металла',
  'толчок',
  'семь',
  'пункт',
  'третий',
  'должен',
  'ручные',
  'волосы',
  'описывать',
  'повар',
  'этаж',
  'или',
  'результат',
  'сжечь',
  'холм',
  'сейф',
  'кошка',
  'век',
  'рассматривать',
  'тип',
  'закон',
  'немного',
  'побережье',
  'копия',
  'фраза',
  'тихий',
  'высокий',
  'песок',
  'почвы',
  'рулон',
  'температура',
  'палец',
  'промышленность',
  'значение',
  'борьба',
  'ложь',
  'бить',
  'возбуждать',
  'естественный',
  'вид',
  'смысл',
  'капитал',
  'не будет',
  'стул',
  'опасность',
  'фрукты',
  'богатые',
  'толщиной',
  'солдат',
  'процесс',
  'работать',
  'практика',
  'отдельный',
  'трудный',
  'врач',
  'пожалуйста',
  'защищать',
  'полдень',
  'урожай',
  'современный',
  'элемент',
  'хит',
  'студент',
  'угол',
  'партия',
  'поставка',
  'чьи',
  'разместить',
  'кольцо',
  'характер',
  'насекомое',
  'пойманный',
  'период',
  'указывать',
  'радио',
  'говорил',
  'атом',
  'человек',
  'история',
  'эффект',
  'электрический',
  'ожидать',
  'кость',
  'железнодорожные',
  'вообразить',
  'обеспечить',
  'соглашаться',
  'таким образом',
  'нежный',
  'женщина',
  'капитан',
  'догадываться',
  'необходимо',
  'резкое',
  'крыло',
  'создавать',
  'сосед',
  'стирка',
  'летучая мышь',
  'толпа',
  'кукуруза',
  'сравнить',
  'стихотворение',
  'строка',
  'колокол',
  'зависеть',
  'мясо',
  'руб',
  'трубка',
  'известный',
  'доллар',
  'поток',
  'страх',
  'зрение',
  'тонкий',
  'треугольник',
  'планета',
  'спешить',
  'главный',
  'колония',
  'часы',
  'шахта',
  'связать',
  'введите',
  'основным',
  'свежий',
  'поиск',
  'отправить',
  'желтый',
  'пистолет',
  'позволять',
  'печать',
  'мертвый',
  'место',
  'пустыня',
  'костюм',
  'ток',
  'лифт',
  'выросла',
  'приходим',
  'мастер',
  'трек',
  'родитель',
  'берег',
  'деление',
  'лист',
  'вещество',
  'пользу',
  'подключать',
  'пост',
  'провести',
  'аккорд',
  'жира',
  'довольный',
  'оригинальный',
  'доля',
  'станция',
  'папа',
  'хлеб',
  'взимать',
  'собственно',
  'бар',
  'предложение',
  'сегмент',
  'раб',
  'утка',
  'растворимый',
  'рынок',
  'степень',
  'заселять',
  'цыпленок',
  'дорогой',
  'враг',
  'ответ',
  'напиток',
  'происходить',
  'поддержка',
  'речь',
  'природа',
  'диапазон',
  'пара',
  'движение',
  'путь',
  'жидкости',
  'войти',
  'означало',
  'фактор',
  'зубы',
  'оболочка',
  'шея',
  'кислорода',
  'сахар',
  'смерть',
  'довольно',
  'умение',
  'женщины',
  'сезон',
  'решение',
  'магнит',
  'серебро',
  'спасибо',
  'филиал',
  'матч',
  'суффикс',
  'особенно',
  'рис',
  'боится',
  'огромный',
  'сестра',
  'сталь',
  'обсуждать',
  'вперед',
  'похожи',
  'направлять',
  'опыт',
  'счет',
  'яблоко',
  'купленный',
  'привело',
  'шаг',
  'пальто',
  'масса',
  'карта',
  'полоса',
  'веревка',
  'скольжение',
  'выиграть',
  'мечтать',
  'вечер',
  'состояние',
  'корма',
  'инструмент',
  'общий',
  'основной',
  'запах',
  'долина',
  'двойной',
  'сиденья',
  'продолжать',
  'блок',
  'диаграмма',
  'шляпа',
  'продать',
  'успех',
  'компания',
  'вычитать',
  'мероприятие',
  'частности',
  'сделка',
  'плавать',
  'термин',
  'напротив',
  'жена',
  'обуви',
  'плечо',
  'распространение',
  'организовать',
  'лагерь',
  'изобретать',
  'хлопок',
  'родившийся',
  'определять',
  'кварта',
  'девять',
  'грузовик',
  'шум',
  'уровень',
  'шанс',
  'собирать',
  'магазин',
  'протяжение',
  'бросать',
  'блеск',
  'имущество',
  'колонка',
  'молекула',
  'выбирать',
  'неправильно',
  'серый',
  'повторение',
  'требовать',
  'широкий',
  'подготовить',
  'соль',
  'нос',
  'множественное',
  'гнев',
  'претензии',
  'континент'
]

let game = {
  word: '',
  guesses: 0,
  usedLetters: [],

  newGame() {
    this.fails = 0;
    this.usedLetters = [];
    this.word = this.getWord();
    this.updateHangman();

    this.title = '_'.repeat(this.word.length);
    document.title = this.title.split('').join(' ');
  },

  updateHangman() {
    favicon.setAttribute('href', this.fails + '.png');
  },

  handleInput(e) {
    if (e.key == ' ') {
      this.newGame();
    } else if (/^[\u0400-\u04FF]+$/.test(e.key.toLowerCase())) {
      this.makeGuess(e.key.toLowerCase());
    }
  },

  makeGuess(letter) {
    if (this.usedLetters.includes(letter) || this.fails >= 6) {
      return;
    }
    this.usedLetters.push(letter);

    if (this.word.includes(letter)) {
      // good guess
      this.title = this.title.split('').map((v,i)=>{
        return (this.word[i] == letter) ? letter : v;
      }).join('');
      document.title = this.title.split('').join(' ');

      // win
      if (!this.title.includes('_')) {
        document.title += ' ... победа!';
      }
    } else {
      // bad guess
      this.fails += 1;

      if (this.fails >= 6) {
        // loss
        this.title = this.title.split('').map((v,i)=>{
          return (v == '_') ? this.word[i].toUpperCase() : v;
        }).join('');
        document.title = this.title.split('').join(' ') + ' ... поражение';
      }
    }
    this.updateHangman();
  },

  getWord() {
    return words[Math.floor(Math.random() * words.length)].toLowerCase();
  },
}

document.addEventListener('keydown', (e)=> { game.handleInput(e) });

game.newGame()
